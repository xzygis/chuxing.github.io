<!doctype html><html itemscope itemtype=http://schema.org/WebPage lang=zh-CN><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1,maximum-scale=2"><meta name=robots content="noodp"><title>云原生概述 - TechInsights - Chuxing's Blog</title><meta name=author content="chuxing"><meta name=author-link content="https://github.com/xzygis"><meta name=description content="云原生的定义 云原生技术有利于各组织在公有云、私有云和混合云等新型动态环境中，构建和运行可弹性扩展的应用。云原生的代表技术包括容器、服务网格、微服务、不可变基础设施和声明式API。 这些技术能够构建容错性好、易于管理和便于观察的松耦合系统。结合可靠的自动化手段，云原生技术使工程师能够轻松地对系统作出频繁"><meta name=keywords content="Cloud Native"><meta itemprop=name content="云原生概述"><meta itemprop=description content="云原生的定义 云原生技术有利于各组织在公有云、私有云和混合云等新型动态环境中，构建和运行可弹性扩展的应用。云原生的代表技术包括容器、服务网格、微服务、不可变基础设施和声明式API。 这些技术能够构建容错性好、易于管理和便于观察的松耦合系统。结合可靠的自动化手段，云原生技术使工程师能够轻松地对系统作出频繁"><meta itemprop=datePublished content="2020-01-28T15:05:10+00:00"><meta itemprop=dateModified content="2022-12-10T14:35:38+08:00"><meta itemprop=wordCount content="3516"><meta itemprop=image content="https://xzygis.github.io/logo.png"><meta itemprop=keywords content="Cloud Native,"><meta property="og:title" content="云原生概述"><meta property="og:description" content="云原生的定义 云原生技术有利于各组织在公有云、私有云和混合云等新型动态环境中，构建和运行可弹性扩展的应用。云原生的代表技术包括容器、服务网格、微服务、不可变基础设施和声明式API。 这些技术能够构建容错性好、易于管理和便于观察的松耦合系统。结合可靠的自动化手段，云原生技术使工程师能够轻松地对系统作出频繁"><meta property="og:type" content="article"><meta property="og:url" content="https://xzygis.github.io/posts/introduction-of-cloud-native/"><meta property="og:image" content="https://xzygis.github.io/logo.png"><meta property="article:section" content="posts"><meta property="article:published_time" content="2020-01-28T15:05:10+00:00"><meta property="article:modified_time" content="2022-12-10T14:35:38+08:00"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://xzygis.github.io/logo.png"><meta name=twitter:title content="云原生概述"><meta name=twitter:description content="云原生的定义 云原生技术有利于各组织在公有云、私有云和混合云等新型动态环境中，构建和运行可弹性扩展的应用。云原生的代表技术包括容器、服务网格、微服务、不可变基础设施和声明式API。 这些技术能够构建容错性好、易于管理和便于观察的松耦合系统。结合可靠的自动化手段，云原生技术使工程师能够轻松地对系统作出频繁"><meta name=application-name content="技术洞察"><meta name=apple-mobile-web-app-title content="技术洞察"><meta name=theme-color data-light=#ffffff data-dark=#252627 content="#ffffff"><meta name=msapplication-TileColor content="#da532c"><link rel="shortcut icon" type=image/x-icon href=/favicon.ico><link rel=icon type=image/png sizes=32x32 href=/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/favicon-16x16.png><link rel=apple-touch-icon sizes=180x180 href=/apple-touch-icon.png><link rel=mask-icon href=/safari-pinned-tab.svg color=#5bbad5><link rel=manifest href=/site.webmanifest><link rel=canonical href=https://xzygis.github.io/posts/introduction-of-cloud-native/><link rel=prev href=https://xzygis.github.io/posts/introduction-of-service-mesh/><link rel=next href=https://xzygis.github.io/posts/introduction-of-k8s/><link rel=stylesheet href=/css/style.min.css><link rel=stylesheet href=/lib/fontawesome-free/all.min.css><link rel=stylesheet href=/lib/animate/animate.min.css><script type=application/ld+json>{"@context":"http://schema.org","@type":"BlogPosting","headline":"云原生概述","inLanguage":"zh-CN","mainEntityOfPage":{"@type":"WebPage","@id":"https:\/\/xzygis.github.io\/posts\/introduction-of-cloud-native\/"},"image":["https:\/\/xzygis.github.io\/site-meta.jpg"],"genre":"posts","keywords":"Cloud Native","wordcount":3516,"url":"https:\/\/xzygis.github.io\/posts\/introduction-of-cloud-native\/","datePublished":"2020-01-28T15:05:10+00:00","dateModified":"2022-12-10T14:35:38+08:00","publisher":{"@type":"Organization","name":"xzygis","logo":"https:\/\/xzygis.github.io\/images\/avatar.jpg"},"author":{"@type":"Person","name":"chuxing"},"description":""}</script></head><body data-header-desktop=sticky data-header-mobile=auto><script>(window.localStorage?.getItem("theme")?localStorage.getItem("theme")==="dark":"auto"==="auto"?window.matchMedia("(prefers-color-scheme: dark)").matches:"auto"==="dark")&&document.body.setAttribute("data-theme","dark")</script><div class=wrapper data-page-style=normal><header class="desktop animate__faster" id=header-desktop><div class=header-wrapper data-github-corner=right><div class=header-title><a href=/ title="TechInsights - Chuxing's Blog"><img loading=lazy src=/logo.png srcset="/logo.png, /logo.png 1.5x, /logo.png 2x" sizes=auto data-title="TechInsights - Chuxing's Blog" data-alt="TechInsights - Chuxing's Blog" class=logo style="background:url(/svg/loading.min.svg)no-repeat 50%" onload='this.title=this.dataset.title,this.alt=this.dataset.alt;for(const e of["style","data-title","data-alt","onerror","onload"])this.removeAttribute(e);this.dataset.lazyloaded=""' onerror='this.title=this.dataset.title,this.alt=this.dataset.alt;for(const e of["style","data-title","data-alt","onerror","onload"])this.removeAttribute(e)'><span class=header-title-text>TechInsights</span></a><span class=header-subtitle>Unity of Knowledge and Action</span></div><nav><ul class=menu><li class=menu-item><a class=menu-link href=/posts/><i class="fa-solid fa-archive fa-fw fa-sm" aria-hidden=true></i> 所有文章</a></li><li class=menu-item><a class=menu-link href=/categories/><i class="fa-solid fa-th fa-fw fa-sm" aria-hidden=true></i> 分类</a></li><li class=menu-item><a class=menu-link href=/tags/><i class="fa-solid fa-tags fa-fw fa-sm" aria-hidden=true></i> 标签</a></li><li class=menu-item><a class=menu-link href=/about/><i class="fa-solid fa-user-tie fa-fw fa-sm" aria-hidden=true></i> 关于</a></li><li class=menu-item><a class=menu-link href=/about/ title=About>About</a></li><li class="menu-item delimiter"></li><li class="menu-item search" id=search-desktop><input type=text placeholder=搜索文章标题或内容…… id=search-input-desktop>
<a href=javascript:void(0); class="search-button search-toggle" id=search-toggle-desktop title=搜索><i class="fa-solid fa-search fa-fw" aria-hidden=true></i></a>
<a href=javascript:void(0); class="search-button search-clear" id=search-clear-desktop title=清空><i class="fa-solid fa-times-circle fa-fw" aria-hidden=true></i></a>
<span class="search-button search-loading" id=search-loading-desktop><i class="fa-solid fa-spinner fa-fw fa-spin" aria-hidden=true></i></span></li><li class="menu-item theme-switch" title=切换主题><i class="fa-solid fa-adjust fa-fw" aria-hidden=true></i></li></ul></nav></div></header><header class="mobile animate__faster" id=header-mobile><div class=header-container><div class=header-wrapper><div class=header-title><a href=/ title="TechInsights - Chuxing's Blog"><img loading=lazy src=/logo.png srcset="/logo.png, /logo.png 1.5x, /logo.png 2x" sizes=auto data-title=/logo.png data-alt=/logo.png class=logo style="background:url(/svg/loading.min.svg)no-repeat 50%" onload='this.title=this.dataset.title,this.alt=this.dataset.alt;for(const e of["style","data-title","data-alt","onerror","onload"])this.removeAttribute(e);this.dataset.lazyloaded=""' onerror='this.title=this.dataset.title,this.alt=this.dataset.alt;for(const e of["style","data-title","data-alt","onerror","onload"])this.removeAttribute(e)'><span class=header-title-text>TechInsights</span></a><span class=header-subtitle>Unity of Knowledge and Action</span></div><div class=menu-toggle id=menu-toggle-mobile><span></span><span></span><span></span></div></div><nav><ul class=menu id=menu-mobile><li class=search-wrapper><div class="search mobile" id=search-mobile><input type=text placeholder=搜索文章标题或内容…… id=search-input-mobile>
<a href=javascript:void(0); class="search-button search-toggle" id=search-toggle-mobile title=搜索><i class="fa-solid fa-search fa-fw" aria-hidden=true></i></a>
<a href=javascript:void(0); class="search-button search-clear" id=search-clear-mobile title=清空><i class="fa-solid fa-times-circle fa-fw" aria-hidden=true></i></a>
<span class="search-button search-loading" id=search-loading-mobile><i class="fa-solid fa-spinner fa-fw fa-spin" aria-hidden=true></i></span></div><a href=javascript:void(0); class=search-cancel id=search-cancel-mobile>取消</a></li><li class=menu-item><a class=menu-link href=/posts/><i class="fa-solid fa-archive fa-fw fa-sm" aria-hidden=true></i> 所有文章</a></li><li class=menu-item><a class=menu-link href=/categories/><i class="fa-solid fa-th fa-fw fa-sm" aria-hidden=true></i> 分类</a></li><li class=menu-item><a class=menu-link href=/tags/><i class="fa-solid fa-tags fa-fw fa-sm" aria-hidden=true></i> 标签</a></li><li class=menu-item><a class=menu-link href=/about/><i class="fa-solid fa-user-tie fa-fw fa-sm" aria-hidden=true></i> 关于</a></li><li class=menu-item><a class=menu-link href=/about/ title=About>About</a></li><li class="menu-item text-center"><a class=menu-link href=https://github.com/xzygis/xzygis.github.io title=GitHub rel="noopener noreferrer" target=_blank><i class='fa-brands fa-github fa-fw' aria-hidden=true></i></a></li><li class="menu-item menu-system"><span class="menu-system-item theme-switch" title=切换主题><i class="fa-solid fa-adjust fa-fw" aria-hidden=true></i></span></li></ul></nav></div></header><div class="search-dropdown desktop"><div id=search-dropdown-desktop></div></div><div class="search-dropdown mobile"><div id=search-dropdown-mobile></div></div><main class=container><aside class=toc id=toc-auto><h2 class=toc-title>目录&nbsp;<i class="toc-icon fa-solid fa-angle-down fa-fw" aria-hidden=true></i></h2><div class=toc-content id=toc-content-auto></div></aside><aside class=aside-custom></aside><article class="page single"><div class=header><h1 class="single-title animate__animated animate__flipInX"><span>云原生概述</span></h1></div><div class=post-meta><div class=post-meta-line><span class=post-author><a href=https://github.com/xzygis title=作者 target=_blank rel="external nofollow noopener noreferrer author" class=author><i class="fa-solid fa-user-circle" aria-hidden=true></i>
chuxing</a></span>
<span class=post-category>收录于 <a href=/categories/%E4%BA%91%E5%8E%9F%E7%94%9F/><i class="fa-regular fa-folder fa-fw" aria-hidden=true></i> 云原生</a></span></div><div class=post-meta-line><span title="发布于 2020-01-28 15:05:10"><i class="fa-regular fa-calendar-alt fa-fw me-1" aria-hidden=true></i><time datetime=2020-01-28>2020-01-28</time></span>&nbsp;<span title="更新于 2022-12-10 14:35:38"><i class="fa-regular fa-edit fa-fw me-1" aria-hidden=true></i><time datetime=2022-12-10>2022-12-10</time></span>&nbsp;<span><i class="fa-solid fa-pencil-alt fa-fw me-1" aria-hidden=true></i>约 3516 字</span>&nbsp;<span><i class="fa-regular fa-clock fa-fw me-1" aria-hidden=true></i>预计阅读 8 分钟</span>&nbsp;<span id=/posts/introduction-of-cloud-native/ class="leancloud_visitors comment-visitors" data-flag-title=云原生概述>
<i class="fa-regular fa-eye fa-fw me-1" aria-hidden=true></i><span class=leancloud-visitors-count>-</span>&nbsp;次阅读
</span>&nbsp;<span class=comment-count data-flag-title=云原生概述>
<i class="fa-regular fa-comments fa-fw me-1" aria-hidden=true></i><span data-xid=/posts/introduction-of-cloud-native/ class=valine-comment-count>-</span>&nbsp;条评论
</span>&nbsp;</div></div><div class="details toc" id=toc-static data-kept=false><div class="details-summary toc-title"><span>目录</span>
<span><i class="details-icon fa-solid fa-angle-right" aria-hidden=true></i></span></div><div class="details-content toc-content" id=toc-content-static><nav id=TableOfContents><ul><li><a href=#云原生的定义>云原生的定义</a></li><li><a href=#云原生的设计哲学>云原生的设计哲学</a><ul><li><a href=#云原生的设计理念>云原生的设计理念</a></li><li><a href=#云原生应用程序>云原生应用程序</a><ul><li><a href=#微服务>微服务</a></li><li><a href=#健康报告>健康报告</a></li><li><a href=#遥测数据>遥测数据</a></li><li><a href=#弹性>弹性</a><ul><li><a href=#为失败设计>为失败设计</a></li><li><a href=#优雅降级>优雅降级</a></li></ul></li><li><a href=#声明式非命令式>声明式，非命令式</a></li></ul></li></ul></li><li><a href=#play-with-kubernetes>Play with Kubernetes</a><ul><li><a href=#创建kubernetes集群>创建Kubernetes集群</a></li><li><a href=#创建nginx-deployment>创建nginx deployment</a></li></ul></li></ul></nav></div></div><div class=content id=content data-end-flag=(End)><h2 id=云原生的定义>云原生的定义</h2><p>云原生技术有利于各组织在公有云、私有云和混合云等新型动态环境中，构建和运行可弹性扩展的应用。云原生的代表技术包括容器、服务网格、微服务、不可变基础设施和声明式API。</p><p>这些技术能够构建容错性好、易于管理和便于观察的松耦合系统。结合可靠的自动化手段，云原生技术使工程师能够轻松地对系统作出频繁和可预测的重大变更。</p><h2 id=云原生的设计哲学>云原生的设计哲学</h2><p>云原生本身甚至不能称为是一种架构，它首先是一种基础设施，运行在其上的应用称作云原生应用，只有符合云原生设计哲学的应用架构才叫云原生应用架构。</p><h3 id=云原生的设计理念>云原生的设计理念</h3><p>云原生系统的设计理念如下:</p><ul><li>面向分布式设计（Distribution）：容器、微服务、API 驱动的开发；</li><li>面向配置设计（Configuration）：一个镜像，多个环境配置；</li><li>面向韧性设计（Resistancy）：故障容忍和自愈；</li><li>面向弹性设计（Elasticity）：弹性扩展和对环境变化（负载）做出响应；</li><li>面向交付设计（Delivery）：自动拉起，缩短交付时间；</li><li>面向性能设计（Performance）：响应式，并发和资源高效利用；</li><li>面向自动化设计（Automation）：自动化的 DevOps；</li><li>面向诊断性设计（Diagnosability）：集群级别的日志、metric 和追踪；</li><li>面向安全性设计（Security）：安全端点、API Gateway、端到端加密；</li></ul><h3 id=云原生应用程序>云原生应用程序</h3><p>云原生应用程序被设计为在平台上运行，并设计用于弹性，敏捷性，可操作性和可观察性。弹性包含失败而不是试图阻止它们；它利用了在平台上运行的动态特性。敏捷性允许快速部署和快速迭代。可操作性从应用程序内部控制应用程序生命周期，而不是依赖外部进程和监视器。可观察性提供信息来回答有关应用程序状态的问题。</p><p>实现云原生应用程序所需特性的常用方法：</p><ul><li>微服务</li><li>健康报告</li><li>遥测数据</li><li>弹性</li><li>声明式的，而不是命令式的</li></ul><h4 id=微服务>微服务</h4><p>微服务 (Microservices) 是一种软件架构风格，它是以专注于单一责任与功能的小型功能区块 (Small Building Blocks) 为基础，利用模块化的方式组合出复杂的大型应用程序，各功能区块使用与语言无关 (Language-Independent/Language agnostic) 的 API 集相互通信。</p><p>微服务是一种以业务功能为主的服务设计概念，每一个服务都具有自主运行的业务功能，对外开放不受语言限制的 API (最常用的是 HTTP)，应用程序则是由一个或多个微服务组成。</p><h4 id=健康报告>健康报告</h4><p>为了提高云原生应用程序的可操作性，应用程序应该暴露健康检查。开发人员可以将其实施为命令或过程信号，以便应用程序在执行自我检查之后响应，或者更常见的是：通过应用程序提供Web服务，返回HTTP状态码来检查健康状态。</p><p>一个很好的例子就是当平台需要知道应用程序何时可以接收流量。在应用程序启动时，如果它不能正确处理流量，它就应该表现为未准备好。</p><h4 id=遥测数据>遥测数据</h4><p>遥测数据是进行决策所需的信息。确实，遥测数据可能与健康报告重叠，但它们有不同的用途。健康报告通知我们应用程序生命周期状态，而遥测数据通知我们应用程序业务目标。</p><p>测量的指标有时称为服务级指标（SLI）或关键性能指标（KPI）。这些是特定于应用程序的数据，可以确保应用程序的性能处于服务级别目标（SLO）内。</p><h4 id=弹性>弹性</h4><p>一旦你有遥测和监测数据，你需要确保你的应用程序对故障有适应能力。弹性是基础设施的责任，但云原生应用程序也需要承担部分工作。在云原生应用程序中考虑弹性的两个主要方面：为失败设计和优雅降级。</p><h5 id=为失败设计>为失败设计</h5><p>设计一个以失败期望为目标的应用程序将比假定可用性的应用程序更具防御性。当故障不可避免时，将会有额外的检查，故障模式和日志内置到应用程序中。</p><h5 id=优雅降级>优雅降级</h5><p>云原生应用程序处理过载的一种方式。</p><h4 id=声明式非命令式>声明式，非命令式</h4><p>声明式编程是一种编程范式，与命令式编程相对立。它描述目标的性质，让电脑明白目标，而非流程。声明式编程不用告诉电脑问题领域，从而避免随之而来的副作用。而命令式编程则需要用算法来明确的指出每一步该怎么做。</p><p>声明式通信模型规范了通信模型，并且它将功能实现从应用程序转移到远程API或服务端点，从而实现某种状态到达期望状态。这有助于简化应用程序，并使它们彼此的行为更具可预测性。</p><p>例子：SQL数据库
其实你很早就接触过声明式编程语言， SQL语言就是很典型的例子：</p><div class=highlight id=id-1><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-sql data-lang=sql><span class=line><span class=cl><span class=k>SELECT</span><span class=w> </span><span class=o>*</span><span class=w> </span><span class=k>from</span><span class=w> </span><span class=k>user</span><span class=w> </span><span class=k>WHERE</span><span class=w> </span><span class=n>user_name</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>Ben</span></span></span></code></pre></td></tr></table></div></div><p>上面是一个很普通的SQL查询语句，我只只声明我想要找一个叫Ben的用户（What) , 就是不说SQL该怎么（How）去寻找怎么做。接下来我们看看如果用命令式语言写会是什么样的：</p><div class=highlight id=id-2><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span><span class=lnt>8
</span><span class=lnt>9
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=c1>//user=[{user_name:&#39;ou&#39;,user_id=1},.....]
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kd>var</span> <span class=nx>user</span>
</span></span><span class=line><span class=cl><span class=k>for</span><span class=p>(</span><span class=kd>var</span> <span class=nx>i</span> <span class=o>=</span> <span class=mi>0</span><span class=p>;</span> <span class=nx>i</span> <span class=o>&lt;</span> <span class=nx>user</span><span class=p>.</span><span class=nx>length</span><span class=p>;</span> <span class=nx>i</span><span class=o>++</span><span class=p>){</span>
</span></span><span class=line><span class=cl>    <span class=k>if</span><span class=p>(</span><span class=nx>user</span><span class=p>.</span><span class=nx>user_name</span> <span class=o>==</span> <span class=s2>&#34;Ben&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span>
</span></span><span class=line><span class=cl>         <span class=nx>print</span><span class=p>(</span><span class=s2>&#34;find&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>         <span class=k>break</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span></span></span></code></pre></td></tr></table></div></div><p>通过上面的对比你可以看出声明式语言的优势-短小精悍，你并不会知道程序的控制流（control flow）我们不需要告诉程序如何去寻找（How），而是只告诉程序我们想要的结果（What），让程序自己来解决过程（How）。当然SQL具体的细节还是用命令式的编程风格来实现的。</p><h2 id=play-with-kubernetes>Play with Kubernetes</h2><h3 id=创建kubernetes集群>创建Kubernetes集群</h3><p>登陆Play with Kubernetes，启动第一个实例作为Master节点，在web终端上执行：</p><ol><li>初始化master节点：</li></ol><div class=highlight id=id-3><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl>kubeadm init --apiserver-advertise-address <span class=k>$(</span>hostname -i<span class=k>)</span></span></span></code></pre></td></tr></table></div></div><p>输出如下：</p><div class=highlight id=id-4><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span><span class=lnt>33
</span><span class=lnt>34
</span><span class=lnt>35
</span><span class=lnt>36
</span><span class=lnt>37
</span><span class=lnt>38
</span><span class=lnt>39
</span><span class=lnt>40
</span><span class=lnt>41
</span><span class=lnt>42
</span><span class=lnt>43
</span><span class=lnt>44
</span><span class=lnt>45
</span><span class=lnt>46
</span><span class=lnt>47
</span><span class=lnt>48
</span><span class=lnt>49
</span><span class=lnt>50
</span><span class=lnt>51
</span><span class=lnt>52
</span><span class=lnt>53
</span><span class=lnt>54
</span><span class=lnt>55
</span><span class=lnt>56
</span><span class=lnt>57
</span><span class=lnt>58
</span><span class=lnt>59
</span><span class=lnt>60
</span><span class=lnt>61
</span><span class=lnt>62
</span><span class=lnt>63
</span><span class=lnt>64
</span><span class=lnt>65
</span><span class=lnt>66
</span><span class=lnt>67
</span><span class=lnt>68
</span><span class=lnt>69
</span><span class=lnt>70
</span><span class=lnt>71
</span><span class=lnt>72
</span><span class=lnt>73
</span><span class=lnt>74
</span><span class=lnt>75
</span><span class=lnt>76
</span><span class=lnt>77
</span><span class=lnt>78
</span><span class=lnt>79
</span><span class=lnt>80
</span><span class=lnt>81
</span><span class=lnt>82
</span><span class=lnt>83
</span><span class=lnt>84
</span><span class=lnt>85
</span><span class=lnt>86
</span><span class=lnt>87
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-v data-lang=v><span class=line><span class=cl><span class=p>[</span><span class=na>node1</span> <span class=err>~</span><span class=p>]</span><span class=err>$</span> <span class=nv>kubeadm</span> <span class=nv>init</span> <span class=o>--</span><span class=nv>apiserver</span><span class=o>-</span><span class=nv>advertise</span><span class=o>-</span><span class=nv>address</span> <span class=err>$</span><span class=p>(</span><span class=nv>hostname</span> <span class=o>-</span><span class=nv>i</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=nc>Initializing</span> <span class=nv>machine</span> <span class=nc>ID</span> <span class=nv>from</span> <span class=nv>random</span> <span class=nv>generator</span><span class=p>.</span>
</span></span><span class=line><span class=cl><span class=p>[</span><span class=na>init</span><span class=p>]</span> <span class=nv>using</span> <span class=nc>Kubernetes</span> <span class=nv>version</span><span class=p>:</span> <span class=nv>v1</span><span class=mf>.11.10</span>
</span></span><span class=line><span class=cl><span class=p>[</span><span class=na>preflight</span><span class=p>]</span> <span class=nv>running</span> <span class=nv>pre</span><span class=o>-</span><span class=nv>flight</span> <span class=nv>checks</span>
</span></span><span class=line><span class=cl>        <span class=p>[</span><span class=na>WARNING</span> <span class=na>Service</span><span class=err>-</span><span class=na>Docker</span><span class=p>]:</span> <span class=nv>docker</span> <span class=nv>service</span> <span class=k>is</span> <span class=nv>not</span> <span class=nv>active</span><span class=p>,</span> <span class=nv>please</span> <span class=nv>run</span> <span class=s1>&#39;systemctl start docker.service&#39;</span>
</span></span><span class=line><span class=cl>        <span class=p>[</span><span class=nc>WARNING</span> <span class=nc>FileContent</span><span class=o>--</span><span class=nv>proc</span><span class=o>-</span><span class=nv>sys</span><span class=o>-</span><span class=nv>net</span><span class=o>-</span><span class=nv>bridge</span><span class=o>-</span><span class=nv>bridge</span><span class=o>-</span><span class=nv>nf</span><span class=o>-</span><span class=nv>call</span><span class=o>-</span><span class=nv>iptables</span><span class=p>]:</span> <span class=o>/</span><span class=nv>proc</span><span class=o>/</span><span class=nv>sys</span><span class=o>/</span><span class=nv>net</span><span class=o>/</span><span class=nv>bridge</span><span class=o>/</span><span class=nv>bridge</span><span class=o>-</span><span class=nv>nf</span><span class=o>-</span><span class=nv>call</span><span class=o>-</span><span class=nv>iptables</span> <span class=nv>does</span> <span class=nv>not</span> <span class=nv>exist</span>
</span></span><span class=line><span class=cl><span class=nc>I1117</span> <span class=mi>13</span><span class=p>:</span><span class=mi>53</span><span class=p>:</span><span class=mf>18.409493</span>     <span class=mi>885</span> <span class=nv>kernel_validator</span><span class=p>.</span><span class=k>go</span><span class=p>:</span><span class=mi>81</span><span class=p>]</span> <span class=nc>Validating</span> <span class=nv>kernel</span> <span class=nv>version</span>
</span></span><span class=line><span class=cl><span class=nc>I1117</span> <span class=mi>13</span><span class=p>:</span><span class=mi>53</span><span class=p>:</span><span class=mf>18.409685</span>     <span class=mi>885</span> <span class=nv>kernel_validator</span><span class=p>.</span><span class=k>go</span><span class=p>:</span><span class=mi>96</span><span class=p>]</span> <span class=nc>Validating</span> <span class=nv>kernel</span> <span class=nv>config</span>
</span></span><span class=line><span class=cl><span class=p>[</span><span class=na>preflight</span><span class=p>]</span> <span class=nc>The</span> <span class=nv>system</span> <span class=nv>verification</span> <span class=nv>failed</span><span class=p>.</span> <span class=nc>Printing</span> <span class=nv>the</span> <span class=nv>output</span> <span class=nv>from</span> <span class=nv>the</span> <span class=nl>verification</span><span class=p>:</span>
</span></span><span class=line><span class=cl><span class=nc>KERNEL_VERSION</span><span class=p>:</span> <span class=mf>4.4.0</span><span class=o>-</span><span class=mi>148</span><span class=o>-</span><span class=nv>generic</span>
</span></span><span class=line><span class=cl><span class=nc>DOCKER_VERSION</span><span class=p>:</span> <span class=mf>18.06.1</span><span class=o>-</span><span class=nv>ce</span>
</span></span><span class=line><span class=cl><span class=nc>OS</span><span class=p>:</span> <span class=nc>Linux</span>
</span></span><span class=line><span class=cl><span class=nc>CGROUPS_CPU</span><span class=p>:</span> <span class=nv>enabled</span>
</span></span><span class=line><span class=cl><span class=nc>CGROUPS_CPUACCT</span><span class=p>:</span> <span class=nv>enabled</span>
</span></span><span class=line><span class=cl><span class=nc>CGROUPS_CPUSET</span><span class=p>:</span> <span class=nv>enabled</span>
</span></span><span class=line><span class=cl><span class=nc>CGROUPS_DEVICES</span><span class=p>:</span> <span class=nv>enabled</span>
</span></span><span class=line><span class=cl><span class=nc>CGROUPS_FREEZER</span><span class=p>:</span> <span class=nv>enabled</span>
</span></span><span class=line><span class=cl><span class=nc>CGROUPS_MEMORY</span><span class=p>:</span> <span class=nv>enabled</span>
</span></span><span class=line><span class=cl>        <span class=p>[</span><span class=na>WARNING</span> <span class=na>SystemVerification</span><span class=p>]:</span> <span class=nv>docker</span> <span class=nv>version</span> <span class=k>is</span> <span class=nv>greater</span> <span class=nv>than</span> <span class=nv>the</span> <span class=nv>most</span> <span class=nv>recently</span> <span class=nv>validated</span> <span class=nv>version</span><span class=p>.</span> <span class=nc>Docker</span> <span class=nv>version</span><span class=p>:</span> <span class=mf>18.06.1</span><span class=o>-</span><span class=nv>ce</span><span class=p>.</span> <span class=nc>Max</span> <span class=nv>validated</span> <span class=nv>version</span><span class=p>:</span> <span class=mf>17.03</span>
</span></span><span class=line><span class=cl>        <span class=p>[</span><span class=na>WARNING</span> <span class=na>SystemVerification</span><span class=p>]:</span> <span class=nv>failed</span> <span class=nv>to</span> <span class=nv>parse</span> <span class=nv>kernel</span> <span class=nv>config</span><span class=p>:</span> <span class=nv>unable</span> <span class=nv>to</span> <span class=nv>load</span> <span class=nv>kernel</span> <span class=kn>module</span> <span class=s2>&#34;configs&#34;</span><span class=p>:</span> <span class=nv>output</span> <span class=o>-</span> <span class=s2>&#34;&#34;</span><span class=p>,</span> <span class=nv>err</span> <span class=o>-</span> <span class=nv>exit</span> <span class=nv>status</span> <span class=mi>1</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>[</span><span class=na>preflight</span><span class=err>/</span><span class=na>images</span><span class=p>]</span> <span class=nc>Pulling</span> <span class=nv>images</span> <span class=nv>required</span> <span class=k>for</span> <span class=nv>setting</span> <span class=nv>up</span> <span class=nv>a</span> <span class=nc>Kubernetes</span> <span class=nv>cluster</span>
</span></span><span class=line><span class=cl><span class=p>[</span><span class=na>preflight</span><span class=err>/</span><span class=na>images</span><span class=p>]</span> <span class=nc>This</span> <span class=nv>might</span> <span class=nv>take</span> <span class=nv>a</span> <span class=nv>minute</span> <span class=k>or</span> <span class=nv>two</span><span class=p>,</span> <span class=nv>depending</span> <span class=nv>on</span> <span class=nv>the</span> <span class=nv>speed</span> <span class=nv>of</span> <span class=nv>your</span> <span class=nv>internet</span> <span class=nv>connection</span>
</span></span><span class=line><span class=cl><span class=p>[</span><span class=na>preflight</span><span class=err>/</span><span class=na>images</span><span class=p>]</span> <span class=nc>You</span> <span class=nv>can</span> <span class=nv>also</span> <span class=nv>perform</span> <span class=nv>this</span> <span class=nv>action</span> <span class=k>in</span> <span class=nv>beforehand</span> <span class=nv>using</span> <span class=s1>&#39;kubeadm config images pull&#39;</span>
</span></span><span class=line><span class=cl><span class=p>[</span><span class=na>kubelet</span><span class=p>]</span> <span class=nc>Writing</span> <span class=nv>kubelet</span> <span class=nv>environment</span> <span class=nv>file</span> <span class=nv>with</span> <span class=nv>flags</span> <span class=nv>to</span> <span class=nv>file</span> <span class=s2>&#34;/var/lib/kubelet/kubeadm-flags.env&#34;</span>
</span></span><span class=line><span class=cl><span class=p>[</span><span class=na>kubelet</span><span class=p>]</span> <span class=nc>Writing</span> <span class=nv>kubelet</span> <span class=nv>configuration</span> <span class=nv>to</span> <span class=nv>file</span> <span class=s2>&#34;/var/lib/kubelet/config.yaml&#34;</span>
</span></span><span class=line><span class=cl><span class=p>[</span><span class=na>preflight</span><span class=p>]</span> <span class=nc>Activating</span> <span class=nv>the</span> <span class=nv>kubelet</span> <span class=nv>service</span>
</span></span><span class=line><span class=cl><span class=p>[</span><span class=na>certificates</span><span class=p>]</span> <span class=nc>Generated</span> <span class=nv>ca</span> <span class=nv>certificate</span> <span class=nv>and</span> <span class=nv>key</span><span class=p>.</span>
</span></span><span class=line><span class=cl><span class=p>[</span><span class=na>certificates</span><span class=p>]</span> <span class=nc>Generated</span> <span class=nv>apiserver</span> <span class=nv>certificate</span> <span class=nv>and</span> <span class=nv>key</span><span class=p>.</span>
</span></span><span class=line><span class=cl><span class=p>[</span><span class=na>certificates</span><span class=p>]</span> <span class=nv>apiserver</span> <span class=nv>serving</span> <span class=nv>cert</span> <span class=k>is</span> <span class=nv>signed</span> <span class=k>for</span> <span class=nc>DNS</span> <span class=nv>names</span> <span class=p>[</span><span class=na>node1</span> <span class=na>kubernetes</span> <span class=na>kubernetes</span><span class=err>.</span><span class=na>default</span> <span class=na>kubernetes</span><span class=err>.</span><span class=na>default</span><span class=err>.</span><span class=na>svc</span> <span class=na>kubernetes</span><span class=err>.</span><span class=na>default</span><span class=err>.</span><span class=na>svc</span><span class=err>.</span><span class=na>cluster</span><span class=err>.</span><span class=na>local</span><span class=p>]</span> <span class=nv>and</span> <span class=nc>IPs</span> <span class=p>[</span><span class=na>10</span><span class=err>.</span><span class=na>96</span><span class=err>.</span><span class=na>0</span><span class=err>.</span><span class=na>1</span> <span class=na>192</span><span class=err>.</span><span class=na>168</span><span class=err>.</span><span class=na>0</span><span class=err>.</span><span class=na>18</span><span class=p>]</span>
</span></span><span class=line><span class=cl><span class=p>[</span><span class=na>certificates</span><span class=p>]</span> <span class=nc>Generated</span> <span class=nv>apiserver</span><span class=o>-</span><span class=nv>kubelet</span><span class=o>-</span><span class=nv>client</span> <span class=nv>certificate</span> <span class=nv>and</span> <span class=nv>key</span><span class=p>.</span>
</span></span><span class=line><span class=cl><span class=p>[</span><span class=na>certificates</span><span class=p>]</span> <span class=nc>Generated</span> <span class=nv>sa</span> <span class=nv>key</span> <span class=nv>and</span> <span class=nv>public</span> <span class=nv>key</span><span class=p>.</span>
</span></span><span class=line><span class=cl><span class=p>[</span><span class=na>certificates</span><span class=p>]</span> <span class=nc>Generated</span> <span class=nv>front</span><span class=o>-</span><span class=nv>proxy</span><span class=o>-</span><span class=nv>ca</span> <span class=nv>certificate</span> <span class=nv>and</span> <span class=nv>key</span><span class=p>.</span>
</span></span><span class=line><span class=cl><span class=p>[</span><span class=na>certificates</span><span class=p>]</span> <span class=nc>Generated</span> <span class=nv>front</span><span class=o>-</span><span class=nv>proxy</span><span class=o>-</span><span class=nv>client</span> <span class=nv>certificate</span> <span class=nv>and</span> <span class=nv>key</span><span class=p>.</span>
</span></span><span class=line><span class=cl><span class=p>[</span><span class=na>certificates</span><span class=p>]</span> <span class=nc>Generated</span> <span class=nv>etcd</span><span class=o>/</span><span class=nv>ca</span> <span class=nv>certificate</span> <span class=nv>and</span> <span class=nv>key</span><span class=p>.</span>
</span></span><span class=line><span class=cl><span class=p>[</span><span class=na>certificates</span><span class=p>]</span> <span class=nc>Generated</span> <span class=nv>etcd</span><span class=o>/</span><span class=nv>server</span> <span class=nv>certificate</span> <span class=nv>and</span> <span class=nv>key</span><span class=p>.</span>
</span></span><span class=line><span class=cl><span class=p>[</span><span class=na>certificates</span><span class=p>]</span> <span class=nv>etcd</span><span class=o>/</span><span class=nv>server</span> <span class=nv>serving</span> <span class=nv>cert</span> <span class=k>is</span> <span class=nv>signed</span> <span class=k>for</span> <span class=nc>DNS</span> <span class=nv>names</span> <span class=p>[</span><span class=na>node1</span> <span class=na>localhost</span><span class=p>]</span> <span class=nv>and</span> <span class=nc>IPs</span> <span class=p>[</span><span class=na>127</span><span class=err>.</span><span class=na>0</span><span class=err>.</span><span class=na>0</span><span class=err>.</span><span class=na>1</span> <span class=p>::</span><span class=s>1</span><span class=p>]</span>
</span></span><span class=line><span class=cl><span class=p>[</span><span class=na>certificates</span><span class=p>]</span> <span class=nc>Generated</span> <span class=nv>etcd</span><span class=o>/</span><span class=nv>peer</span> <span class=nv>certificate</span> <span class=nv>and</span> <span class=nv>key</span><span class=p>.</span>
</span></span><span class=line><span class=cl><span class=p>[</span><span class=na>certificates</span><span class=p>]</span> <span class=nv>etcd</span><span class=o>/</span><span class=nv>peer</span> <span class=nv>serving</span> <span class=nv>cert</span> <span class=k>is</span> <span class=nv>signed</span> <span class=k>for</span> <span class=nc>DNS</span> <span class=nv>names</span> <span class=p>[</span><span class=na>node1</span> <span class=na>localhost</span><span class=p>]</span> <span class=nv>and</span> <span class=nc>IPs</span> <span class=p>[</span><span class=na>192</span><span class=err>.</span><span class=na>168</span><span class=err>.</span><span class=na>0</span><span class=err>.</span><span class=na>18</span> <span class=na>127</span><span class=err>.</span><span class=na>0</span><span class=err>.</span><span class=na>0</span><span class=err>.</span><span class=na>1</span> <span class=p>::</span><span class=s>1</span><span class=p>]</span>
</span></span><span class=line><span class=cl><span class=p>[</span><span class=na>certificates</span><span class=p>]</span> <span class=nc>Generated</span> <span class=nv>etcd</span><span class=o>/</span><span class=nv>healthcheck</span><span class=o>-</span><span class=nv>client</span> <span class=nv>certificate</span> <span class=nv>and</span> <span class=nv>key</span><span class=p>.</span>
</span></span><span class=line><span class=cl><span class=p>[</span><span class=na>certificates</span><span class=p>]</span> <span class=nc>Generated</span> <span class=nv>apiserver</span><span class=o>-</span><span class=nv>etcd</span><span class=o>-</span><span class=nv>client</span> <span class=nv>certificate</span> <span class=nv>and</span> <span class=nv>key</span><span class=p>.</span>
</span></span><span class=line><span class=cl><span class=p>[</span><span class=na>certificates</span><span class=p>]</span> <span class=nv>valid</span> <span class=nv>certificates</span> <span class=nv>and</span> <span class=nv>keys</span> <span class=nv>now</span> <span class=nv>exist</span> <span class=k>in</span> <span class=s2>&#34;/etc/kubernetes/pki&#34;</span>
</span></span><span class=line><span class=cl><span class=p>[</span><span class=na>kubeconfig</span><span class=p>]</span> <span class=nc>Wrote</span> <span class=nc>KubeConfig</span> <span class=nv>file</span> <span class=nv>to</span> <span class=nv>disk</span><span class=p>:</span> <span class=s2>&#34;/etc/kubernetes/admin.conf&#34;</span>
</span></span><span class=line><span class=cl><span class=p>[</span><span class=na>kubeconfig</span><span class=p>]</span> <span class=nc>Wrote</span> <span class=nc>KubeConfig</span> <span class=nv>file</span> <span class=nv>to</span> <span class=nv>disk</span><span class=p>:</span> <span class=s2>&#34;/etc/kubernetes/kubelet.conf&#34;</span>
</span></span><span class=line><span class=cl><span class=p>[</span><span class=na>kubeconfig</span><span class=p>]</span> <span class=nc>Wrote</span> <span class=nc>KubeConfig</span> <span class=nv>file</span> <span class=nv>to</span> <span class=nv>disk</span><span class=p>:</span> <span class=s2>&#34;/etc/kubernetes/controller-manager.conf&#34;</span>
</span></span><span class=line><span class=cl><span class=p>[</span><span class=na>kubeconfig</span><span class=p>]</span> <span class=nc>Wrote</span> <span class=nc>KubeConfig</span> <span class=nv>file</span> <span class=nv>to</span> <span class=nv>disk</span><span class=p>:</span> <span class=s2>&#34;/etc/kubernetes/scheduler.conf&#34;</span>
</span></span><span class=line><span class=cl><span class=p>[</span><span class=na>controlplane</span><span class=p>]</span> <span class=nv>wrote</span> <span class=nc>Static</span> <span class=nc>Pod</span> <span class=nv>manifest</span> <span class=k>for</span> <span class=nv>component</span> <span class=nv>kube</span><span class=o>-</span><span class=nv>apiserver</span> <span class=nv>to</span> <span class=s2>&#34;/etc/kubernetes/manifests/kube-apiserver.yaml&#34;</span>
</span></span><span class=line><span class=cl><span class=p>[</span><span class=na>controlplane</span><span class=p>]</span> <span class=nv>wrote</span> <span class=nc>Static</span> <span class=nc>Pod</span> <span class=nv>manifest</span> <span class=k>for</span> <span class=nv>component</span> <span class=nv>kube</span><span class=o>-</span><span class=nv>controller</span><span class=o>-</span><span class=nv>manager</span> <span class=nv>to</span> <span class=s2>&#34;/etc/kubernetes/manifests/kube-controller-manager.yaml&#34;</span>
</span></span><span class=line><span class=cl><span class=p>[</span><span class=na>controlplane</span><span class=p>]</span> <span class=nv>wrote</span> <span class=nc>Static</span> <span class=nc>Pod</span> <span class=nv>manifest</span> <span class=k>for</span> <span class=nv>component</span> <span class=nv>kube</span><span class=o>-</span><span class=nv>scheduler</span> <span class=nv>to</span> <span class=s2>&#34;/etc/kubernetes/manifests/kube-scheduler.yaml&#34;</span>
</span></span><span class=line><span class=cl><span class=p>[</span><span class=na>etcd</span><span class=p>]</span> <span class=nc>Wrote</span> <span class=nc>Static</span> <span class=nc>Pod</span> <span class=nv>manifest</span> <span class=k>for</span> <span class=nv>a</span> <span class=nv>local</span> <span class=nv>etcd</span> <span class=nv>instance</span> <span class=nv>to</span> <span class=s2>&#34;/etc/kubernetes/manifests/etcd.yaml&#34;</span>
</span></span><span class=line><span class=cl><span class=p>[</span><span class=na>init</span><span class=p>]</span> <span class=nv>waiting</span> <span class=k>for</span> <span class=nv>the</span> <span class=nv>kubelet</span> <span class=nv>to</span> <span class=nv>boot</span> <span class=nv>up</span> <span class=nv>the</span> <span class=nv>control</span> <span class=nv>plane</span> <span class=k>as</span> <span class=nc>Static</span> <span class=nc>Pods</span> <span class=nv>from</span> <span class=nv>directory</span> <span class=s2>&#34;/etc/kubernetes/manifests&#34;</span>
</span></span><span class=line><span class=cl><span class=p>[</span><span class=na>init</span><span class=p>]</span> <span class=nv>this</span> <span class=nv>might</span> <span class=nv>take</span> <span class=nv>a</span> <span class=nv>minute</span> <span class=k>or</span> <span class=nv>longer</span> <span class=k>if</span> <span class=nv>the</span> <span class=nv>control</span> <span class=nv>plane</span> <span class=nv>images</span> <span class=nv>have</span> <span class=nv>to</span> <span class=nv>be</span> <span class=nv>pulled</span>
</span></span><span class=line><span class=cl><span class=p>[</span><span class=na>apiclient</span><span class=p>]</span> <span class=nc>All</span> <span class=nv>control</span> <span class=nv>plane</span> <span class=nv>components</span> <span class=nv>are</span> <span class=nv>healthy</span> <span class=nv>after</span> <span class=mf>51.503514</span> <span class=nv>seconds</span>
</span></span><span class=line><span class=cl><span class=p>[</span><span class=na>uploadconfig</span><span class=p>]</span> <span class=nv>storing</span> <span class=nv>the</span> <span class=nv>configuration</span> <span class=nv>used</span> <span class=k>in</span> <span class=nc>ConfigMap</span> <span class=s2>&#34;kubeadm-config&#34;</span> <span class=k>in</span> <span class=nv>the</span> <span class=s2>&#34;kube-system&#34;</span> <span class=nc>Namespace</span>
</span></span><span class=line><span class=cl><span class=p>[</span><span class=na>kubelet</span><span class=p>]</span> <span class=nc>Creating</span> <span class=nv>a</span> <span class=nc>ConfigMap</span> <span class=s2>&#34;kubelet-config-1.11&#34;</span> <span class=k>in</span> <span class=nv>namespace</span> <span class=nv>kube</span><span class=o>-</span><span class=nv>system</span> <span class=nv>with</span> <span class=nv>the</span> <span class=nv>configuration</span> <span class=k>for</span> <span class=nv>the</span> <span class=nv>kubelets</span> <span class=k>in</span> <span class=nv>the</span> <span class=nv>cluster</span>
</span></span><span class=line><span class=cl><span class=p>[</span><span class=na>markmaster</span><span class=p>]</span> <span class=nc>Marking</span> <span class=nv>the</span> <span class=nv>node</span> <span class=nv>node1</span> <span class=k>as</span> <span class=nv>master</span> <span class=nv>by</span> <span class=nv>adding</span> <span class=nv>the</span> <span class=nv>label</span> <span class=s2>&#34;node-role.kubernetes.io/master=&#39;&#39;&#34;</span>
</span></span><span class=line><span class=cl><span class=p>[</span><span class=na>markmaster</span><span class=p>]</span> <span class=nc>Marking</span> <span class=nv>the</span> <span class=nv>node</span> <span class=nv>node1</span> <span class=k>as</span> <span class=nv>master</span> <span class=nv>by</span> <span class=nv>adding</span> <span class=nv>the</span> <span class=nv>taints</span> <span class=p>[</span><span class=na>node</span><span class=err>-</span><span class=na>role</span><span class=err>.</span><span class=na>kubernetes</span><span class=err>.</span><span class=na>io</span><span class=err>/</span><span class=na>master</span><span class=p>:</span><span class=s>NoSchedule</span><span class=p>]</span>
</span></span><span class=line><span class=cl><span class=p>[</span><span class=na>patchnode</span><span class=p>]</span> <span class=nc>Uploading</span> <span class=nv>the</span> <span class=nc>CRI</span> <span class=nc>Socket</span> <span class=nv>information</span> <span class=s2>&#34;/var/run/dockershim.sock&#34;</span> <span class=nv>to</span> <span class=nv>the</span> <span class=nc>Node</span> <span class=nc>API</span> <span class=nv>object</span> <span class=s2>&#34;node1&#34;</span> <span class=k>as</span> <span class=nv>an</span> <span class=nv>annotation</span>
</span></span><span class=line><span class=cl><span class=p>[</span><span class=na>bootstraptoken</span><span class=p>]</span> <span class=nv>using</span> <span class=nv>token</span><span class=p>:</span> <span class=mi>5</span><span class=nv>f1nyz</span><span class=mf>.351</span><span class=nv>cet8vt4g2ix78</span>
</span></span><span class=line><span class=cl><span class=p>[</span><span class=na>bootstraptoken</span><span class=p>]</span> <span class=nv>configured</span> <span class=nc>RBAC</span> <span class=nv>rules</span> <span class=nv>to</span> <span class=nv>allow</span> <span class=nc>Node</span> <span class=nc>Bootstrap</span> <span class=nv>tokens</span> <span class=nv>to</span> <span class=nv>post</span> <span class=nc>CSRs</span> <span class=k>in</span> <span class=nv>order</span> <span class=k>for</span> <span class=nv>nodes</span> <span class=nv>to</span> <span class=nv>get</span> <span class=nv>long</span> <span class=nv>term</span> <span class=nv>certificate</span> <span class=nv>credentials</span>
</span></span><span class=line><span class=cl><span class=p>[</span><span class=na>bootstraptoken</span><span class=p>]</span> <span class=nv>configured</span> <span class=nc>RBAC</span> <span class=nv>rules</span> <span class=nv>to</span> <span class=nv>allow</span> <span class=nv>the</span> <span class=nv>csrapprover</span> <span class=nv>controller</span> <span class=nv>automatically</span> <span class=nv>approve</span> <span class=nc>CSRs</span> <span class=nv>from</span> <span class=nv>a</span> <span class=nc>Node</span> <span class=nc>Bootstrap</span> <span class=nc>Token</span>
</span></span><span class=line><span class=cl><span class=p>[</span><span class=na>bootstraptoken</span><span class=p>]</span> <span class=nv>configured</span> <span class=nc>RBAC</span> <span class=nv>rules</span> <span class=nv>to</span> <span class=nv>allow</span> <span class=nv>certificate</span> <span class=nv>rotation</span> <span class=k>for</span> <span class=nv>all</span> <span class=nv>node</span> <span class=nv>client</span> <span class=nv>certificates</span> <span class=k>in</span> <span class=nv>the</span> <span class=nv>cluster</span>
</span></span><span class=line><span class=cl><span class=p>[</span><span class=na>bootstraptoken</span><span class=p>]</span> <span class=nv>creating</span> <span class=nv>the</span> <span class=s2>&#34;cluster-info&#34;</span> <span class=nc>ConfigMap</span> <span class=k>in</span> <span class=nv>the</span> <span class=s2>&#34;kube-public&#34;</span> <span class=nv>namespace</span>
</span></span><span class=line><span class=cl><span class=p>[</span><span class=na>addons</span><span class=p>]</span> <span class=nc>Applied</span> <span class=nv>essential</span> <span class=nv>addon</span><span class=p>:</span> <span class=nc>CoreDNS</span>
</span></span><span class=line><span class=cl><span class=p>[</span><span class=na>addons</span><span class=p>]</span> <span class=nc>Applied</span> <span class=nv>essential</span> <span class=nv>addon</span><span class=p>:</span> <span class=nv>kube</span><span class=o>-</span><span class=nv>proxy</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nc>Your</span> <span class=nc>Kubernetes</span> <span class=nv>master</span> <span class=nv>has</span> <span class=nv>initialized</span> <span class=nv>successfully</span><span class=o>!</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nc>To</span> <span class=nv>start</span> <span class=nv>using</span> <span class=nv>your</span> <span class=nv>cluster</span><span class=p>,</span> <span class=nv>you</span> <span class=nv>need</span> <span class=nv>to</span> <span class=nv>run</span> <span class=nv>the</span> <span class=nv>following</span> <span class=k>as</span> <span class=nv>a</span> <span class=nv>regular</span> <span class=nl>user</span><span class=p>:</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=nv>mkdir</span> <span class=o>-</span><span class=nv>p</span> <span class=o>$</span><span class=nc>HOME</span><span class=o>/</span><span class=p>.</span><span class=nv>kube</span>
</span></span><span class=line><span class=cl>  <span class=nv>sudo</span> <span class=nv>cp</span> <span class=o>-</span><span class=nv>i</span> <span class=o>/</span><span class=nv>etc</span><span class=o>/</span><span class=nv>kubernetes</span><span class=o>/</span><span class=nv>admin</span><span class=p>.</span><span class=nv>conf</span> <span class=o>$</span><span class=nc>HOME</span><span class=o>/</span><span class=p>.</span><span class=nv>kube</span><span class=o>/</span><span class=nv>config</span>
</span></span><span class=line><span class=cl>  <span class=nv>sudo</span> <span class=nv>chown</span> <span class=err>$</span><span class=p>(</span><span class=nv>id</span> <span class=o>-</span><span class=nv>u</span><span class=p>):</span><span class=err>$</span><span class=p>(</span><span class=nv>id</span> <span class=o>-</span><span class=nv>g</span><span class=p>)</span> <span class=o>$</span><span class=nc>HOME</span><span class=o>/</span><span class=p>.</span><span class=nv>kube</span><span class=o>/</span><span class=nv>config</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nc>You</span> <span class=nv>should</span> <span class=nv>now</span> <span class=nv>deploy</span> <span class=nv>a</span> <span class=nv>pod</span> <span class=nv>network</span> <span class=nv>to</span> <span class=nv>the</span> <span class=nv>cluster</span><span class=p>.</span>
</span></span><span class=line><span class=cl><span class=nc>Run</span> <span class=s2>&#34;kubectl apply -f [podnetwork].yaml&#34;</span> <span class=nv>with</span> <span class=nv>one</span> <span class=nv>of</span> <span class=nv>the</span> <span class=nv>options</span> <span class=nv>listed</span> <span class=nl>at</span><span class=p>:</span>
</span></span><span class=line><span class=cl>  <span class=nv>https</span><span class=p>:</span><span class=c1>//kubernetes.io/docs/concepts/cluster-administration/addons/
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class=line><span class=cl><span class=nc>You</span> <span class=nv>can</span> <span class=nv>now</span> <span class=nv>join</span> <span class=kt>any</span> <span class=nv>number</span> <span class=nv>of</span> <span class=nv>machines</span> <span class=nv>by</span> <span class=nv>running</span> <span class=nv>the</span> <span class=nv>following</span> <span class=nv>on</span> <span class=nv>each</span> <span class=nv>node</span>
</span></span><span class=line><span class=cl><span class=k>as</span> <span class=nl>root</span><span class=p>:</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=nv>kubeadm</span> <span class=nv>join</span> <span class=mf>192.168.0.18</span><span class=p>:</span><span class=mi>6443</span> <span class=o>--</span><span class=nv>token</span> <span class=mi>5</span><span class=nv>f1nyz</span><span class=mf>.351</span><span class=nv>cet8vt4g2ix78</span> <span class=o>--</span><span class=nv>discovery</span><span class=o>-</span><span class=nv>token</span><span class=o>-</span><span class=nv>ca</span><span class=o>-</span><span class=nv>cert</span><span class=o>-</span><span class=nv>hash</span> <span class=nv>sha256</span><span class=p>:</span><span class=nv>d105d049cf090f7814473e5554b79e09cd13e4acfd8a56b09754ba9181d08fd8</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nc>Waiting</span> <span class=k>for</span> <span class=nv>api</span> <span class=nv>server</span> <span class=nv>to</span> <span class=nv>startup</span>
</span></span><span class=line><span class=cl><span class=nc>Warning</span><span class=p>:</span> <span class=nv>kubectl</span> <span class=nv>apply</span> <span class=nv>should</span> <span class=nv>be</span> <span class=nv>used</span> <span class=nv>on</span> <span class=nv>resource</span> <span class=nv>created</span> <span class=nv>by</span> <span class=nv>either</span> <span class=nv>kubectl</span> <span class=nv>create</span> <span class=o>--</span><span class=nv>save</span><span class=o>-</span><span class=nv>config</span> <span class=k>or</span> <span class=nv>kubectl</span> <span class=nv>apply</span>
</span></span><span class=line><span class=cl><span class=nv>daemonset</span><span class=p>.</span><span class=nv>extensions</span><span class=o>/</span><span class=nv>kube</span><span class=o>-</span><span class=nv>proxy</span> <span class=nv>configured</span>
</span></span><span class=line><span class=cl><span class=nc>No</span> <span class=nv>resources</span> <span class=nv>found</span></span></span></code></pre></td></tr></table></div></div><ol start=2><li>初始化集群网络：</li></ol><div class=highlight id=id-5><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl>kubectl apply -n kube-system -f  <span class=s2>&#34;https://cloud.weave.works/k8s/net?k8s-version=</span><span class=k>$(</span>kubectl version <span class=p>|</span> base64 <span class=p>|</span> tr -d <span class=s1>&#39;\n&#39;</span><span class=k>)</span><span class=s2>&#34;</span></span></span></code></pre></td></tr></table></div></div><p>输出如下：</p><div class=highlight id=id-6><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>serviceaccount/weave-net created
</span></span><span class=line><span class=cl>clusterrole.rbac.authorization.k8s.io/weave-net created
</span></span><span class=line><span class=cl>clusterrolebinding.rbac.authorization.k8s.io/weave-net created
</span></span><span class=line><span class=cl>role.rbac.authorization.k8s.io/weave-net created
</span></span><span class=line><span class=cl>rolebinding.rbac.authorization.k8s.io/weave-net created
</span></span><span class=line><span class=cl>daemonset.apps/weave-net created</span></span></code></pre></td></tr></table></div></div><ol start=3><li>执行下列初始化命令：</li></ol><div class=highlight id=id-7><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl>mkdir -p <span class=nv>$HOME</span>/.kube
</span></span><span class=line><span class=cl>cp -i /etc/kubernetes/admin.conf <span class=nv>$HOME</span>/.kube/config
</span></span><span class=line><span class=cl>chown <span class=k>$(</span>id -u<span class=k>)</span>:<span class=k>$(</span>id -g<span class=k>)</span> <span class=nv>$HOME</span>/.kube/config</span></span></code></pre></td></tr></table></div></div><ol start=4><li>根据master节点上的提示，在新的web终端上执行：</li></ol><div class=highlight id=id-8><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl>kubeadm join 192.168.0.18:6443 --token 5f1nyz.351cet8vt4g2ix78 --discovery-token-ca-cert-hash sha256:d105d049cf090f7814473e5554b79e09cd13e4acfd8a56b09754ba9181d08fd8</span></span></code></pre></td></tr></table></div></div><p>输出如下：</p><div class=highlight id=id-9><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span><span class=lnt>33
</span><span class=lnt>34
</span><span class=lnt>35
</span><span class=lnt>36
</span><span class=lnt>37
</span><span class=lnt>38
</span><span class=lnt>39
</span><span class=lnt>40
</span><span class=lnt>41
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-v data-lang=v><span class=line><span class=cl><span class=p>[</span><span class=na>preflight</span><span class=p>]</span> <span class=nv>running</span> <span class=nv>pre</span><span class=o>-</span><span class=nv>flight</span> <span class=nv>checks</span>
</span></span><span class=line><span class=cl>        <span class=p>[</span><span class=na>WARNING</span> <span class=na>DirAvailable</span><span class=err>--</span><span class=na>etc</span><span class=err>-</span><span class=na>kubernetes</span><span class=err>-</span><span class=na>manifests</span><span class=p>]:</span> <span class=o>/</span><span class=nv>etc</span><span class=o>/</span><span class=nv>kubernetes</span><span class=o>/</span><span class=nv>manifests</span> <span class=k>is</span> <span class=nv>not</span> <span class=nv>empty</span>
</span></span><span class=line><span class=cl>        <span class=p>[</span><span class=na>WARNING</span> <span class=na>FileAvailable</span><span class=err>--</span><span class=na>etc</span><span class=err>-</span><span class=na>kubernetes</span><span class=err>-</span><span class=na>pki</span><span class=err>-</span><span class=na>ca</span><span class=err>.</span><span class=na>crt</span><span class=p>]:</span> <span class=o>/</span><span class=nv>etc</span><span class=o>/</span><span class=nv>kubernetes</span><span class=o>/</span><span class=nv>pki</span><span class=o>/</span><span class=nv>ca</span><span class=p>.</span><span class=nv>crt</span> <span class=nv>already</span> <span class=nv>exists</span>
</span></span><span class=line><span class=cl>        <span class=p>[</span><span class=na>WARNING</span> <span class=na>FileAvailable</span><span class=err>--</span><span class=na>etc</span><span class=err>-</span><span class=na>kubernetes</span><span class=err>-</span><span class=na>kubelet</span><span class=err>.</span><span class=na>conf</span><span class=p>]:</span> <span class=o>/</span><span class=nv>etc</span><span class=o>/</span><span class=nv>kubernetes</span><span class=o>/</span><span class=nv>kubelet</span><span class=p>.</span><span class=nv>conf</span> <span class=nv>already</span> <span class=nv>exists</span>
</span></span><span class=line><span class=cl>        <span class=p>[</span><span class=na>WARNING</span> <span class=na>RequiredIPVSKernelModulesAvailable</span><span class=p>]:</span> <span class=kt>error</span> <span class=nv>getting</span> <span class=nv>required</span> <span class=nv>builtin</span> <span class=nv>kernel</span> <span class=nv>modules</span><span class=p>:</span> <span class=nv>exit</span> <span class=nv>status</span> <span class=mi>1</span><span class=p>(</span><span class=nv>cut</span><span class=p>:</span> <span class=o>/</span><span class=nv>lib</span><span class=o>/</span><span class=nv>modules</span><span class=o>/</span><span class=mf>4.4.0</span><span class=o>-</span><span class=mi>166</span><span class=o>-</span><span class=nv>generic</span><span class=o>/</span><span class=nv>modules</span><span class=p>.</span><span class=nv>builtin</span><span class=p>:</span> <span class=nc>No</span> <span class=nv>such</span> <span class=nv>file</span> <span class=k>or</span> <span class=nv>directory</span>
</span></span><span class=line><span class=cl><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=p>[</span><span class=nc>WARNING</span> <span class=nc>Service</span><span class=o>-</span><span class=nc>Docker</span><span class=p>]:</span> <span class=nv>docker</span> <span class=nv>service</span> <span class=k>is</span> <span class=nv>not</span> <span class=nv>active</span><span class=p>,</span> <span class=nv>please</span> <span class=nv>run</span> <span class=s1>&#39;systemctl start docker.service&#39;</span>
</span></span><span class=line><span class=cl>        <span class=p>[</span><span class=nc>WARNING</span> <span class=nc>FileContent</span><span class=o>--</span><span class=nv>proc</span><span class=o>-</span><span class=nv>sys</span><span class=o>-</span><span class=nv>net</span><span class=o>-</span><span class=nv>bridge</span><span class=o>-</span><span class=nv>bridge</span><span class=o>-</span><span class=nv>nf</span><span class=o>-</span><span class=nv>call</span><span class=o>-</span><span class=nv>iptables</span><span class=p>]:</span> <span class=o>/</span><span class=nv>proc</span><span class=o>/</span><span class=nv>sys</span><span class=o>/</span><span class=nv>net</span><span class=o>/</span><span class=nv>bridge</span><span class=o>/</span><span class=nv>bridge</span><span class=o>-</span><span class=nv>nf</span><span class=o>-</span><span class=nv>call</span><span class=o>-</span><span class=nv>iptables</span> <span class=nv>does</span> <span class=nv>not</span> <span class=nv>exist</span>
</span></span><span class=line><span class=cl><span class=nc>I1117</span> <span class=mi>14</span><span class=p>:</span><span class=mi>09</span><span class=p>:</span><span class=mf>02.416363</span>    <span class=mi>7243</span> <span class=nv>kernel_validator</span><span class=p>.</span><span class=k>go</span><span class=p>:</span><span class=mi>81</span><span class=p>]</span> <span class=nc>Validating</span> <span class=nv>kernel</span> <span class=nv>version</span>
</span></span><span class=line><span class=cl><span class=nc>I1117</span> <span class=mi>14</span><span class=p>:</span><span class=mi>09</span><span class=p>:</span><span class=mf>02.419283</span>    <span class=mi>7243</span> <span class=nv>kernel_validator</span><span class=p>.</span><span class=k>go</span><span class=p>:</span><span class=mi>96</span><span class=p>]</span> <span class=nc>Validating</span> <span class=nv>kernel</span> <span class=nv>config</span>
</span></span><span class=line><span class=cl><span class=p>[</span><span class=na>preflight</span><span class=p>]</span> <span class=nc>The</span> <span class=nv>system</span> <span class=nv>verification</span> <span class=nv>failed</span><span class=p>.</span> <span class=nc>Printing</span> <span class=nv>the</span> <span class=nv>output</span> <span class=nv>from</span> <span class=nv>the</span> <span class=nl>verification</span><span class=p>:</span>
</span></span><span class=line><span class=cl><span class=nc>KERNEL_VERSION</span><span class=p>:</span> <span class=mf>4.4.0</span><span class=o>-</span><span class=mi>166</span><span class=o>-</span><span class=nv>generic</span>
</span></span><span class=line><span class=cl><span class=nc>DOCKER_VERSION</span><span class=p>:</span> <span class=mf>18.06.1</span><span class=o>-</span><span class=nv>ce</span>
</span></span><span class=line><span class=cl><span class=nc>OS</span><span class=p>:</span> <span class=nc>Linux</span>
</span></span><span class=line><span class=cl><span class=nc>CGROUPS_CPU</span><span class=p>:</span> <span class=nv>enabled</span>
</span></span><span class=line><span class=cl><span class=nc>CGROUPS_CPUACCT</span><span class=p>:</span> <span class=nv>enabled</span>
</span></span><span class=line><span class=cl><span class=nc>CGROUPS_CPUSET</span><span class=p>:</span> <span class=nv>enabled</span>
</span></span><span class=line><span class=cl><span class=nc>CGROUPS_DEVICES</span><span class=p>:</span> <span class=nv>enabled</span>
</span></span><span class=line><span class=cl><span class=nc>CGROUPS_FREEZER</span><span class=p>:</span> <span class=nv>enabled</span>
</span></span><span class=line><span class=cl><span class=nc>CGROUPS_MEMORY</span><span class=p>:</span> <span class=nv>enabled</span>
</span></span><span class=line><span class=cl>        <span class=p>[</span><span class=na>WARNING</span> <span class=na>SystemVerification</span><span class=p>]:</span> <span class=nv>docker</span> <span class=nv>version</span> <span class=k>is</span> <span class=nv>greater</span> <span class=nv>than</span> <span class=nv>the</span> <span class=nv>most</span> <span class=nv>recently</span> <span class=nv>validated</span> <span class=nv>version</span><span class=p>.</span> <span class=nc>Docker</span> <span class=nv>version</span><span class=p>:</span> <span class=mf>18.06.1</span><span class=o>-</span><span class=nv>ce</span><span class=p>.</span> <span class=nc>Max</span> <span class=nv>validated</span> <span class=nv>version</span><span class=p>:</span> <span class=mf>17.03</span>
</span></span><span class=line><span class=cl>        <span class=p>[</span><span class=na>WARNING</span> <span class=na>SystemVerification</span><span class=p>]:</span> <span class=nv>failed</span> <span class=nv>to</span> <span class=nv>parse</span> <span class=nv>kernel</span> <span class=nv>config</span><span class=p>:</span> <span class=nv>unable</span> <span class=nv>to</span> <span class=nv>load</span> <span class=nv>kernel</span> <span class=kn>module</span> <span class=s2>&#34;configs&#34;</span><span class=p>:</span> <span class=nv>output</span> <span class=o>-</span> <span class=s2>&#34;&#34;</span><span class=p>,</span> <span class=nv>err</span> <span class=o>-</span> <span class=nv>exit</span> <span class=nv>status</span> <span class=mi>1</span>
</span></span><span class=line><span class=cl>        <span class=p>[</span><span class=na>WARNING</span> <span class=na>Port</span><span class=err>-</span><span class=na>10250</span><span class=p>]:</span> <span class=nc>Port</span> <span class=mi>10250</span> <span class=k>is</span> <span class=k>in</span> <span class=nv>use</span>
</span></span><span class=line><span class=cl><span class=p>[</span><span class=na>discovery</span><span class=p>]</span> <span class=nc>Trying</span> <span class=nv>to</span> <span class=nv>connect</span> <span class=nv>to</span> <span class=nc>API</span> <span class=nc>Server</span> <span class=s2>&#34;192.168.0.28:6443&#34;</span>
</span></span><span class=line><span class=cl><span class=p>[</span><span class=na>discovery</span><span class=p>]</span> <span class=nc>Created</span> <span class=nv>cluster</span><span class=o>-</span><span class=nv>info</span> <span class=nv>discovery</span> <span class=nv>client</span><span class=p>,</span> <span class=nv>requesting</span> <span class=nv>info</span> <span class=nv>from</span> <span class=s2>&#34;https://192.168.0.28:6443&#34;</span>
</span></span><span class=line><span class=cl><span class=p>[</span><span class=na>discovery</span><span class=p>]</span> <span class=nc>Requesting</span> <span class=nv>info</span> <span class=nv>from</span> <span class=s2>&#34;https://192.168.0.28:6443&#34;</span> <span class=nv>again</span> <span class=nv>to</span> <span class=nv>validate</span> <span class=nc>TLS</span> <span class=nv>against</span> <span class=nv>the</span> <span class=nv>pinned</span> <span class=nv>public</span> <span class=nv>key</span>
</span></span><span class=line><span class=cl><span class=p>[</span><span class=na>discovery</span><span class=p>]</span> <span class=nc>Cluster</span> <span class=nv>info</span> <span class=nv>signature</span> <span class=nv>and</span> <span class=nv>contents</span> <span class=nv>are</span> <span class=nv>valid</span> <span class=nv>and</span> <span class=nc>TLS</span> <span class=nv>certificate</span> <span class=nv>validates</span> <span class=nv>against</span> <span class=nv>pinned</span> <span class=nv>roots</span><span class=p>,</span> <span class=nv>will</span> <span class=nv>use</span> <span class=nc>API</span> <span class=nc>Server</span> <span class=s2>&#34;192.168.0.28:6443&#34;</span>
</span></span><span class=line><span class=cl><span class=p>[</span><span class=na>discovery</span><span class=p>]</span> <span class=nc>Successfully</span> <span class=nv>established</span> <span class=nv>connection</span> <span class=nv>with</span> <span class=nc>API</span> <span class=nc>Server</span> <span class=s2>&#34;192.168.0.28:6443&#34;</span>
</span></span><span class=line><span class=cl><span class=p>[</span><span class=na>kubelet</span><span class=p>]</span> <span class=nc>Downloading</span> <span class=nv>configuration</span> <span class=k>for</span> <span class=nv>the</span> <span class=nv>kubelet</span> <span class=nv>from</span> <span class=nv>the</span> <span class=s2>&#34;kubelet-config-1.11&#34;</span> <span class=nc>ConfigMap</span> <span class=k>in</span> <span class=nv>the</span> <span class=nv>kube</span><span class=o>-</span><span class=nv>system</span> <span class=nv>namespace</span>
</span></span><span class=line><span class=cl><span class=p>[</span><span class=na>kubelet</span><span class=p>]</span> <span class=nc>Writing</span> <span class=nv>kubelet</span> <span class=nv>configuration</span> <span class=nv>to</span> <span class=nv>file</span> <span class=s2>&#34;/var/lib/kubelet/config.yaml&#34;</span>
</span></span><span class=line><span class=cl><span class=p>[</span><span class=na>kubelet</span><span class=p>]</span> <span class=nc>Writing</span> <span class=nv>kubelet</span> <span class=nv>environment</span> <span class=nv>file</span> <span class=nv>with</span> <span class=nv>flags</span> <span class=nv>to</span> <span class=nv>file</span> <span class=s2>&#34;/var/lib/kubelet/kubeadm-flags.env&#34;</span>
</span></span><span class=line><span class=cl><span class=p>[</span><span class=na>preflight</span><span class=p>]</span> <span class=nc>Activating</span> <span class=nv>the</span> <span class=nv>kubelet</span> <span class=nv>service</span>
</span></span><span class=line><span class=cl><span class=p>[</span><span class=na>tlsbootstrap</span><span class=p>]</span> <span class=nc>Waiting</span> <span class=k>for</span> <span class=nv>the</span> <span class=nv>kubelet</span> <span class=nv>to</span> <span class=nv>perform</span> <span class=nv>the</span> <span class=nc>TLS</span> <span class=nc>Bootstrap</span><span class=o>...</span>
</span></span><span class=line><span class=cl><span class=p>[</span><span class=na>patchnode</span><span class=p>]</span> <span class=nc>Uploading</span> <span class=nv>the</span> <span class=nc>CRI</span> <span class=nc>Socket</span> <span class=nv>information</span> <span class=s2>&#34;/var/run/dockershim.sock&#34;</span> <span class=nv>to</span> <span class=nv>the</span> <span class=nc>Node</span> <span class=nc>API</span> <span class=nv>object</span> <span class=s2>&#34;node1&#34;</span> <span class=k>as</span> <span class=nv>an</span> <span class=nv>annotation</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nc>This</span> <span class=nv>node</span> <span class=nv>has</span> <span class=nv>joined</span> <span class=nv>the</span> <span class=nl>cluster</span><span class=p>:</span>
</span></span><span class=line><span class=cl><span class=o>*</span> <span class=nc>Certificate</span> <span class=nv>signing</span> <span class=nv>request</span> <span class=nv>was</span> <span class=nv>sent</span> <span class=nv>to</span> <span class=nv>master</span> <span class=nv>and</span> <span class=nv>a</span> <span class=nv>response</span>
</span></span><span class=line><span class=cl>  <span class=nv>was</span> <span class=nv>received</span><span class=p>.</span>
</span></span><span class=line><span class=cl><span class=o>*</span> <span class=nc>The</span> <span class=nc>Kubelet</span> <span class=nv>was</span> <span class=nv>informed</span> <span class=nv>of</span> <span class=nv>the</span> <span class=nv>new</span> <span class=nv>secure</span> <span class=nv>connection</span> <span class=nv>details</span><span class=p>.</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nc>Run</span> <span class=s1>&#39;kubectl get nodes&#39;</span> <span class=nv>on</span> <span class=nv>the</span> <span class=nv>master</span> <span class=nv>to</span> <span class=nv>see</span> <span class=nv>this</span> <span class=nv>node</span> <span class=nv>join</span> <span class=nv>the</span> <span class=nv>cluster</span><span class=p>.</span></span></span></code></pre></td></tr></table></div></div><p>多开几个实例，重复执行第四步，即可向Kubernetes集群中增加节点。</p><p>此时在master节点上执行<code>kubectl get nodes</code>查看节点所有节点状态：</p><div class=highlight id=id-10><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>[node1 ~]$ kubectl get nodes
</span></span><span class=line><span class=cl>NAME      STATUS    ROLES     AGE       VERSION
</span></span><span class=line><span class=cl>node1     Ready     master    19m       v1.11.3
</span></span><span class=line><span class=cl>node2     Ready     &lt;none&gt;    2m        v1.11.3
</span></span><span class=line><span class=cl>node3     Ready     &lt;none&gt;    1m        v1.11.3</span></span></code></pre></td></tr></table></div></div><h3 id=创建nginx-deployment>创建nginx deployment</h3><div class=highlight id=id-11><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span><span class=lnt>8
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl><span class=o>[</span>node1 ~<span class=o>]</span>$ curl https://raw.githubusercontent.com/kubernetes/website/master/content/en/examples/application/nginx-app.yaml &gt; nginx-app.yaml
</span></span><span class=line><span class=cl>  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current
</span></span><span class=line><span class=cl>                                 Dload  Upload   Total   Spent    Left  Speed
</span></span><span class=line><span class=cl><span class=m>100</span>   <span class=m>497</span>  <span class=m>100</span>   <span class=m>497</span>    <span class=m>0</span>     <span class=m>0</span>   <span class=m>1252</span>      <span class=m>0</span> --:--:-- --:--:-- --:--:--  <span class=m>1255</span>
</span></span><span class=line><span class=cl><span class=o>[</span>node1 ~<span class=o>]</span>$
</span></span><span class=line><span class=cl><span class=o>[</span>node1 ~<span class=o>]</span>$ kubectl apply -f nginx-app.yaml
</span></span><span class=line><span class=cl>service/my-nginx-svc created
</span></span><span class=line><span class=cl>deployment.apps/my-nginx created</span></span></code></pre></td></tr></table></div></div><p>此时查看nodes和pods：</p><div class=highlight id=id-12><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl><span class=o>[</span>node1 ~<span class=o>]</span>$ kubectl get nodes
</span></span><span class=line><span class=cl>NAME      STATUS    ROLES     AGE       VERSION
</span></span><span class=line><span class=cl>node1     Ready     master    29m       v1.11.3
</span></span><span class=line><span class=cl>node2     Ready     &lt;none&gt;    11m       v1.11.3
</span></span><span class=line><span class=cl>node3     Ready     &lt;none&gt;    11m       v1.11.3
</span></span><span class=line><span class=cl><span class=o>[</span>node1 ~<span class=o>]</span>$
</span></span><span class=line><span class=cl><span class=o>[</span>node1 ~<span class=o>]</span>$ kubectl get pods
</span></span><span class=line><span class=cl>NAME                        READY     STATUS    RESTARTS   AGE
</span></span><span class=line><span class=cl>my-nginx-67594d6bf6-2cbbz   1/1       Running   <span class=m>0</span>          1m
</span></span><span class=line><span class=cl>my-nginx-67594d6bf6-r2p6w   1/1       Running   <span class=m>0</span>          1m
</span></span><span class=line><span class=cl>my-nginx-67594d6bf6-vjqn4   1/1       Running   <span class=m>0</span>          1m</span></span></code></pre></td></tr></table></div></div><p>参考来源：</p><ol><li><a href=https://github.com/cncf/toc/blob/master/DEFINITION.md target=_blank rel="external nofollow noopener noreferrer">https://github.com/cncf/toc/blob/master/DEFINITION.md<i class="fa-solid fa-external-link-alt fa-fw fa-xs ms-1 text-secondary" aria-hidden=true></i></a></li><li><a href=https://zh.wikipedia.org/wiki/%E5%BE%AE%E6%9C%8D%E5%8B%99 target=_blank rel="external nofollow noopener noreferrer">https://zh.wikipedia.org/wiki/%E5%BE%AE%E6%9C%8D%E5%8B%99<i class="fa-solid fa-external-link-alt fa-fw fa-xs ms-1 text-secondary" aria-hidden=true></i></a></li><li><a href=https://zh.wikipedia.org/zh-cn/%E5%AE%A3%E5%91%8A%E5%BC%8F%E7%B7%A8%E7%A8%8B target=_blank rel="external nofollow noopener noreferrer">https://zh.wikipedia.org/zh-cn/%E5%AE%A3%E5%91%8A%E5%BC%8F%E7%B7%A8%E7%A8%8B<i class="fa-solid fa-external-link-alt fa-fw fa-xs ms-1 text-secondary" aria-hidden=true></i></a></li><li><a href=https://zhuanlan.zhihu.com/p/34445114 target=_blank rel="external nofollow noopener noreferrer">https://zhuanlan.zhihu.com/p/34445114<i class="fa-solid fa-external-link-alt fa-fw fa-xs ms-1 text-secondary" aria-hidden=true></i></a></li><li><a href=https://labs.play-with-k8s.com/ target=_blank rel="external nofollow noopener noreferrer">https://labs.play-with-k8s.com/<i class="fa-solid fa-external-link-alt fa-fw fa-xs ms-1 text-secondary" aria-hidden=true></i></a></li></ol></div><div class=post-reward><div class=comment>Buy me a coffee~</div><input type=checkbox class=reward-input name=reward id=fi-reward hidden>
<label class=reward-button for=fi-reward>赞赏</label><div class=reward-ways data-mode=static><div><img loading=lazy src=/images/wechatpay.png srcset="/images/wechatpay.png, /images/wechatpay.png 1.5x, /images/wechatpay.png 2x" sizes=auto data-title="chuxing 微信" data-alt="chuxing 微信" style="background:url(/svg/loading.min.svg)no-repeat 50%" onload='this.title=this.dataset.title,this.alt=this.dataset.alt;for(const e of["style","data-title","data-alt","onerror","onload"])this.removeAttribute(e);this.dataset.lazyloaded=""' onerror='this.title=this.dataset.title,this.alt=this.dataset.alt;for(const e of["style","data-title","data-alt","onerror","onload"])this.removeAttribute(e)'><span data-animation>微信</span></div></div></div><div class=post-footer id=post-footer><div class=post-info><div class=post-info-line><div class=post-info-mod><span title="更新于 2022-12-10 14:35:38">更新于 2022-12-10&nbsp;<a class=git-hash href=https://github.com/xzygis/xzygis.github.io/commit/7f415305a8bfeea38ce6b8ff33483aeee48262b7 rel="external nofollow noopener noreferrer" target=_blank title="commit by eagle(crackcosmas@gmail.com) 7f415305a8bfeea38ce6b8ff33483aeee48262b7: 修改文章分类"><i class="fa-solid fa-hashtag fa-fw" aria-hidden=true></i>7f41530</a></span></div><div class=post-info-license><span><a rel="license external nofollow noopener noreferrer" href=https://creativecommons.org/licenses/by-nc/4.0/ target=_blank>CC BY-NC 4.0</a></span></div></div><div class=post-info-line><div class=post-info-md><span><a href=/posts/introduction-of-cloud-native/index.md title=阅读原始文档 class=link-to-markdown>阅读原始文档</a></span><span><a href=https://github.com/xzygis/xzygis.github.io/edit/main/content/posts/2020/Introduction-of-Cloud-Native.md title=编辑此页 target=_blank rel="external nofollow noopener noreferrer" class=link-to-edit>编辑此页</a></span></div><div class=post-info-share><span><a href=javascript:void(0); title="分享到 Twitter" data-sharer=twitter data-url=https://xzygis.github.io/posts/introduction-of-cloud-native/ data-title=云原生概述 data-hashtags="Cloud Native"><i class="fa-brands fa-twitter fa-fw" aria-hidden=true></i></a>
<a href=javascript:void(0); title="分享到 Facebook" data-sharer=facebook data-url=https://xzygis.github.io/posts/introduction-of-cloud-native/ data-hashtag="Cloud Native"><i class="fa-brands fa-facebook-square fa-fw" aria-hidden=true></i></a>
<a href=javascript:void(0); title="分享到 Linkedin" data-sharer=linkedin data-url=https://xzygis.github.io/posts/introduction-of-cloud-native/><i class="fa-brands fa-linkedin fa-fw" aria-hidden=true></i></a>
<a href=javascript:void(0); title="分享到 微博" data-sharer=weibo data-url=https://xzygis.github.io/posts/introduction-of-cloud-native/ data-title=云原生概述 data-ralateuid=xzygis><i class="fa-brands fa-weibo fa-fw" aria-hidden=true></i></a></span></div></div></div><div class=post-info-more><section class=post-tags><i class="fa-solid fa-tags fa-fw me-1" aria-hidden=true></i><a href=/tags/cloud-native/ class=post-tag>Cloud Native</a></section><section><span><a href=javascript:void(0); onclick=window.history.back()>返回</a></span>&nbsp;|&nbsp;<span><a href=/>主页</a></span></section></div><div class=post-nav><a href=/posts/introduction-of-service-mesh/ class=post-nav-item rel=prev title="Service Mesh概述"><i class="fa-solid fa-angle-left fa-fw" aria-hidden=true></i>Service Mesh概述</a>
<a href=/posts/introduction-of-k8s/ class=post-nav-item rel=next title=Kubernetes概述>Kubernetes概述<i class="fa-solid fa-angle-right fa-fw" aria-hidden=true></i></a></div></div><div id=comments><div id=valine class=comment></div><noscript>Please enable JavaScript to view the comments powered by <a href=https://valine.js.org/ rel="external nofollow noopener noreferrer">Valine</a>.</noscript></div></article></main><footer class=footer><div class=footer-container><div class="footer-line powered">由 <a href=https://gohugo.io/ target=_blank rel="external nofollow noopener noreferrer" title="Hugo 0.116.1">Hugo</a> 强力驱动 | 主题 - <a href=https://github.com/hugo-fixit/FixIt target=_blank rel=external title="FixIt v0.2.18"><img class=fixit-icon src=/fixit.min.svg alt="FixIt logo">&nbsp;FixIt</a></div><div class="footer-line copyright" itemscope itemtype=http://schema.org/CreativeWork><i class="fa-regular fa-copyright fa-fw" aria-hidden=true></i>
<span itemprop=copyrightYear>2020 - 2023</span><span class=author itemprop=copyrightHolder>
<a href=https://github.com/xzygis target=_blank rel="external nofollow noopener noreferrer">chuxing</a></span><span class="license footer-divider"><a rel="license external nofollow noopener noreferrer" href=https://creativecommons.org/licenses/by-nc/4.0/ target=_blank>CC BY-NC 4.0</a></span></div><div class="footer-line statistics"></div><div class="footer-line visitor"><span id=busuanzi_container_site_uv title=总访客数><i class="fa-regular fa-user fa-fw" aria-hidden=true></i>&nbsp;<span id=busuanzi_value_site_uv><i class="fa-solid fa-spinner fa-spin fa-fw" aria-hidden=true></i></span></span><span id=busuanzi_container_site_pv class=footer-divider title=总访问量><i class="fa-regular fa-eye fa-fw" aria-hidden=true></i>&nbsp;<span id=busuanzi_value_site_pv><i class="fa-solid fa-spinner fa-spin fa-fw" aria-hidden=true></i></span></span></div></div></footer></div><div class=widgets><div class="fixed-buttons animate__faster d-none"><div class="fixed-button back-to-top" role=button aria-label=回到顶部><i class="fa-solid fa-arrow-up fa-fw" aria-hidden=true></i><span class=variant-numeric>0%</span></div><div class="fixed-button view-comments d-none" role=button aria-label=查看评论><i class="fa-solid fa-comment fa-fw" aria-hidden=true></i></div></div><a href=https://github.com/xzygis/xzygis.github.io title="在 GitHub 上查看程式碼，訂閱請點 Watch" target=_blank rel="external nofollow" class="github-corner right d-none-mobile"><svg viewBox="0 0 250 250" aria-hidden="true"><path d="M0 0 115 115h15l12 27L250 250V0z"/><path d="M128.3 109C113.8 99.7 119 89.6 119 89.6 122 82.7 120.5 78.6 120.5 78.6 119.2 72 123.4 76.3 123.4 76.3 127.3 80.9 125.5 87.3 125.5 87.3 122.9 97.6 130.6 101.9 134.4 103.2" fill="currentcolor" style="transform-origin:130px 106px" class="octo-arm"/><path d="M115 115C114.9 115.1 118.7 116.5 119.8 115.4l13.9-13.8C136.9 99.2 139.9 98.4 142.2 98.6 133.8 88 127.5 74.4 143.8 58 148.5 53.4 154 51.2 159.7 51 160.3 49.4 163.2 43.6 171.4 40.1 171.4 40.1 176.1 42.5 178.8 56.2 183.1 58.6 187.2 61.8 190.9 65.4 194.5 69 197.7 73.2 200.1 77.6 213.8 80.2 216.3 84.9 216.3 84.9 212.7 93.1 206.9 96 205.4 96.6 205.1 102.4 203 107.8 198.3 112.5 181.9 128.9 168.3 122.5 157.7 114.1 157.9 116.9 156.7 120.9 152.7 124.9L141 136.5C139.8 137.7 141.6 141.9 141.8 141.8z" fill="currentcolor" class="octo-body"/></svg></a><div id=mask></div><div class=reading-progress-bar style=left:0;top:0;--bg-progress:var(--fi-success);--bg-progress-dark:var(--fi-success-dark)></div><noscript><div class=noscript-warning>FixIt 主题在启用 JavaScript 的情况下效果最佳。</div></noscript></div><link rel=stylesheet href=/lib/valine/valine.min.css><link rel=stylesheet href=/lib/lightgallery/css/lightgallery-bundle.min.css><link rel=stylesheet href=/lib/katex/katex.min.css><link rel=stylesheet href=/lib/cookieconsent/cookieconsent.min.css><script src=/lib/valine/Valine.min.js></script><script src=/lib/autocomplete/autocomplete.min.js defer></script><script src=/lib/algoliasearch/algoliasearch-lite.umd.min.js defer></script><script src=/lib/twemoji/twemoji.min.js defer></script><script src=/lib/lightgallery/lightgallery.min.js defer></script><script src=/lib/lightgallery/plugins/thumbnail/lg-thumbnail.min.js defer></script><script src=/lib/lightgallery/plugins/zoom/lg-zoom.min.js defer></script><script src=/lib/sharer/sharer.min.js async defer></script><script src=/lib/katex/katex.min.js defer></script><script src=/lib/katex/auto-render.min.js defer></script><script src=/lib/katex/copy-tex.min.js defer></script><script src=/lib/katex/mhchem.min.js defer></script><script src=/lib/cookieconsent/cookieconsent.min.js defer></script><script src=/lib/pangu/pangu.min.js defer></script><script src=/lib/cell-watermark/watermark.min.js defer></script><script src=//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js async defer></script><script>window.config={autoBookmark:!0,code:{copyTitle:"复制到剪贴板",editLockTitle:"锁定可编辑代码块",editUnLockTitle:"解锁可编辑代码块",editable:!0,maxShownLines:50},comment:{enable:!0,expired:!1,valine:{appId:"FZOoctDsbsjlalvygCgbk2AK-gzGzoHsz",appKey:"1xmXqKigfmr7DhTcxfby7KL1",avatar:"wavatar",el:"#valine",emojiCDN:"https://cdn.jsdelivr.net/npm/emoji-datasource-google@14.0.0/img/google/64/",emojiMaps:{100:"1f4af.png",alien:"1f47d.png",anger:"1f4a2.png",angry:"1f620.png",anguished:"1f627.png",astonished:"1f632.png",black_heart:"1f5a4.png",blue_heart:"1f499.png",blush:"1f60a.png",bomb:"1f4a3.png",boom:"1f4a5.png",broken_heart:"1f494.png",brown_heart:"1f90e.png",clown_face:"1f921.png",cold_face:"1f976.png",cold_sweat:"1f630.png",confounded:"1f616.png",confused:"1f615.png",cry:"1f622.png",crying_cat_face:"1f63f.png",cupid:"1f498.png",dash:"1f4a8.png",disappointed:"1f61e.png",disappointed_relieved:"1f625.png",dizzy:"1f4ab.png",dizzy_face:"1f635.png",drooling_face:"1f924.png",exploding_head:"1f92f.png",expressionless:"1f611.png",face_vomiting:"1f92e.png",face_with_cowboy_hat:"1f920.png",face_with_hand_over_mouth:"1f92d.png",face_with_head_bandage:"1f915.png",face_with_monocle:"1f9d0.png",face_with_raised_eyebrow:"1f928.png",face_with_rolling_eyes:"1f644.png",face_with_symbols_on_mouth:"1f92c.png",face_with_thermometer:"1f912.png",fearful:"1f628.png",flushed:"1f633.png",frowning:"1f626.png",ghost:"1f47b.png",gift_heart:"1f49d.png",green_heart:"1f49a.png",grimacing:"1f62c.png",grin:"1f601.png",grinning:"1f600.png",hankey:"1f4a9.png",hear_no_evil:"1f649.png",heart:"2764-fe0f.png",heart_decoration:"1f49f.png",heart_eyes:"1f60d.png",heart_eyes_cat:"1f63b.png",heartbeat:"1f493.png",heartpulse:"1f497.png",heavy_heart_exclamation_mark_ornament:"2763-fe0f.png",hole:"1f573-fe0f.png",hot_face:"1f975.png",hugging_face:"1f917.png",hushed:"1f62f.png",imp:"1f47f.png",innocent:"1f607.png",japanese_goblin:"1f47a.png",japanese_ogre:"1f479.png",joy:"1f602.png",joy_cat:"1f639.png",kiss:"1f48b.png",kissing:"1f617.png",kissing_cat:"1f63d.png",kissing_closed_eyes:"1f61a.png",kissing_heart:"1f618.png",kissing_smiling_eyes:"1f619.png",laughing:"1f606.png",left_speech_bubble:"1f5e8-fe0f.png",love_letter:"1f48c.png",lying_face:"1f925.png",mask:"1f637.png",money_mouth_face:"1f911.png",nauseated_face:"1f922.png",nerd_face:"1f913.png",neutral_face:"1f610.png",no_mouth:"1f636.png",open_mouth:"1f62e.png",orange_heart:"1f9e1.png",partying_face:"1f973.png",pensive:"1f614.png",persevere:"1f623.png",pleading_face:"1f97a.png",pouting_cat:"1f63e.png",purple_heart:"1f49c.png",rage:"1f621.png",relaxed:"263a-fe0f.png",relieved:"1f60c.png",revolving_hearts:"1f49e.png",right_anger_bubble:"1f5ef-fe0f.png",robot_face:"1f916.png",rolling_on_the_floor_laughing:"1f923.png",scream:"1f631.png",scream_cat:"1f640.png",see_no_evil:"1f648.png",shushing_face:"1f92b.png",skull:"1f480.png",skull_and_crossbones:"2620-fe0f.png",sleeping:"1f634.png",sleepy:"1f62a.png",slightly_frowning_face:"1f641.png",slightly_smiling_face:"1f642.png",smile:"1f604.png",smile_cat:"1f638.png",smiley:"1f603.png",smiley_cat:"1f63a.png",smiling_face_with_3_hearts:"1f970.png",smiling_imp:"1f608.png",smirk:"1f60f.png",smirk_cat:"1f63c.png",sneezing_face:"1f927.png",sob:"1f62d.png",space_invader:"1f47e.png",sparkling_heart:"1f496.png",speak_no_evil:"1f64a.png",speech_balloon:"1f4ac.png","star-struck":"1f929.png",stuck_out_tongue:"1f61b.png",stuck_out_tongue_closed_eyes:"1f61d.png",stuck_out_tongue_winking_eye:"1f61c.png",sunglasses:"1f60e.png",sweat:"1f613.png",sweat_drops:"1f4a6.png",sweat_smile:"1f605.png",thinking_face:"1f914.png",thought_balloon:"1f4ad.png",tired_face:"1f62b.png",triumph:"1f624.png",two_hearts:"1f495.png",unamused:"1f612.png",upside_down_face:"1f643.png",weary:"1f629.png",white_frowning_face:"2639-fe0f.png",white_heart:"1f90d.png",wink:"1f609.png",woozy_face:"1f974.png",worried:"1f61f.png",yawning_face:"1f971.png",yellow_heart:"1f49b.png",yum:"1f60b.png",zany_face:"1f92a.png",zipper_mouth_face:"1f910.png",zzz:"1f4a4.png"},enableQQ:!0,highlight:!0,lang:"zh-CN",meta:["nick","mail","link"],pageSize:10,placeholder:`ヾﾉ≧∀≦)o~ 有事请留言！
评论功能以邮件作为通知方式！
如有必要请填写正确邮箱哦！`,recordIP:!0,visitor:!0}},cookieconsent:{content:{dismiss:"同意",link:"了解更多",message:"本网站使用 Cookies 来改善您的浏览体验。"},enable:!0,palette:{button:{background:"#f0f0f0"},popup:{background:"#1aa3ff"}},theme:"edgeless"},enablePWA:!0,lightgallery:!0,math:{delimiters:[{display:!0,left:"$$",right:"$$"},{display:!0,left:"\\[",right:"\\]"},{display:!0,left:"\\begin{equation}",right:"\\end{equation}"},{display:!0,left:"\\begin{equation*}",right:"\\end{equation*}"},{display:!0,left:"\\begin{align}",right:"\\end{align}"},{display:!0,left:"\\begin{align*}",right:"\\end{align*}"},{display:!0,left:"\\begin{alignat}",right:"\\end{alignat}"},{display:!0,left:"\\begin{alignat*}",right:"\\end{alignat*}"},{display:!0,left:"\\begin{gather}",right:"\\end{gather}"},{display:!0,left:"\\begin{CD}",right:"\\end{CD}"},{display:!1,left:"$",right:"$"},{display:!1,left:"\\(",right:"\\)"}],strict:!1},pangu:{enable:!0,selector:"article"},search:{algoliaAppID:"MTJNHU0JVB",algoliaIndex:"index",algoliaSearchKey:"5486225134d99f43826da401ee9bad57",highlightTag:"em",maxResultLength:10,noResultsFound:"没有找到结果",snippetLength:50,type:"algolia"},twemoji:!0,watermark:{appendto:".wrapper>main",colspacing:30,content:'<img style="height: 0.85rem;" src="/logo.png" alt="logo" /> 楚兴',enable:!0,fontfamily:"MMT_LRH,沐目体",fontsize:1.1,height:20,opacity:.0125,rotate:15,rowspacing:60,width:150}}</script><script src=/js/theme.min.js defer></script><script src=/js/custom.min.js defer></script><script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-YPVLJZ991S",{anonymize_ip:!0})</script><script src="https://www.googletagmanager.com/gtag/js?id=G-YPVLJZ991S" async></script></body></html>